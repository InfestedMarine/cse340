<main>
  <div class="register-wrapper">
    <h1><%= title %></h1>

    <%- messages() %>

    <form id="registerForm" action="/account/register" method="post">
      <div class="form-group">
        <label for="account_firstname">First Name</label>
        <input type="text" name="account_firstname" id="accountFirstname" required 
        value="<%= locals.account_firstname %>">
      </div>

      <div class="form-group">
        <label for="account_lastname">Last Name</label>
        <input type="text" name="account_lastname" id="accountLastname" required 
        value="<%= locals.account_lastname %>">
      </div>

      <div class="form-group">
        <label for="account_email">Email</label>
        <input type="email" name="account_email" id="accountEmail" required 
        value="<%= locals.account_email %>">
      </div>

      <div class="form-group">
        <label for="account_password">Password</label>
        <div class="password-field">
          <input 
            type="password" 
            id="account_password" 
            name="account_password"
            minlength="12"
            pattern="(?=.*\d)(?=.*[A-Z])(?=.*[^A-Za-z0-9]).{12,}"
            required
          >
          <button type="button" id="togglePassword">Show</button>
        </div>
        <p class="note">
          Must be at least 12 characters, include 1 uppercase letter, 1 number, and 1 special character.
        </p>
      </div>

      <button type="submit" class="btn">Create Account</button>
    </form>

    <p class="alt-link">Already have an account? <a href="/account/login">Login here</a></p>
  </div>
  <% if (errors) { %>
    <ul class="notice">
        <% errors.array().forEach(error => { %>
            <li><%= error.msg %></li>
            <% }) %>
        </ul>
        <% } %>
</main>
<script>
  const togglePassword = document.getElementById("togglePassword");
  const passwordInput = document.getElementById("account_password");
  togglePassword.addEventListener("click", () => {
    const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
    passwordInput.setAttribute("type", type);
    togglePassword.textContent = type === "password" ? "Show" : "Hide";
  });
</script>